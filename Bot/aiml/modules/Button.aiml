<?xml version='1.0' encoding='UTF-8'?>
<aiml>
	<category>
		<pattern>SelectingModule Button</pattern>
		<template><srai>SelectModule Button XS a Button</srai><reply>read</reply></template>
	</category>

	<topic name='Button ^'>
		<category>
			<pattern>XRead * * nil</pattern>
			<template>
				The button is <star index='1'/> and reads '<star index='2'/>'.
				<reply>tap</reply><reply>hold</reply>
			</template>
		</category>
		<category>
			<pattern>XRead * * *</pattern>
			<template>
				The light is <star index='3'/>.
				<reply>release on â€¦</reply>
			</template>
		</category>

		<category>
			<pattern>tap ^</pattern>
			<template><srai>ModuleSubmit a</srai></template>
		</category>

		<category>
			<pattern>hold ^</pattern>
			<template><srai>InterruptAsync ButtonHold</srai></template>
		</category>

		<category>
			<pattern>InterruptDone ButtonHold</pattern>
			<template>
				<think>
					<set name='ModuleSubmitInProgress'>true</set>
					<set name='topic'>Button holding</set>
				</think>
				<oob><sendinputs>a:hold</sendinputs></oob>
				<oob><timer duration='1'><postback>Holding</postback></timer></oob>
			</template>
		</category>

		<category>
			<pattern>OOB Tick Holding</pattern>
			<template><oob><takescreenshot token='read'/></oob></template>
		</category>
	</topic>

	<topic name='Button holding'>
		<category>
			<pattern>release on <set>number</set></pattern>
			<template><srai>WaitForDigitInTimerAsync ReleaseButton XS <star/></srai></template>
		</category>
		<category>
			<pattern>WaitForDigitInTimerDone ReleaseButton</pattern>
			<template>
				<think><set name='topic'>Button</set></think>
				<srai>ModuleSubmit a:release</srai>
			</template>
		</category>
	</topic>
</aiml>
